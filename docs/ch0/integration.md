# 積分

想像你是一位老闆，正在評估今年的營運表現。每個月的利潤都不相同：1月賺了5萬，2月因為春節假期只賺2萬，3月景氣回升賺了8萬⋯⋯。要計算全年總利潤，你需要將每個月的利潤「累積」起來。這個累積的過程，在數學上就是積分的概念。

更進一步地，如果你想計算消費者從某個商品獲得的總效用，你需要將每一單位消費帶來的邊際效用加總起來；如果你想知道在某個價格區間內的消費者剩餘，你需要計算需求曲線下方的面積。積分不僅是微分的逆運算，更是經濟學中計算「總量」概念的重要工具。從消費者剩餘、生產者剩餘的計算，到現值分析中的連續複利計算，再到經濟成長模型中的動態分析，積分在經濟學的各個領域都扮演著關鍵角色。

## 積分的基本概念

**積分** (integration) 是微分的逆運算，用於計算函數下方的面積或累積變化量。在經濟學中，積分常用於從邊際量計算總量。

!!! note "不定積分"
    若 $F^{\prime}(x) = f(x)$，則稱 $F(x)$ 為 $f(x)$ 的一個**原函數** (primitive function) 或**反導數** (antiderivative)。$f(x)$ 的所有原函數稱為**不定積分**，記作：
    $$
    \int f(x) \, dx = F(x) + C
    $$
    其中 $C$ 為積分常數。

!!! note "定積分"
    函數 $f(x)$ 在區間 $[a, b]$ 上的**定積分**定義為：
    $$
    \int_a^b f(x) \, dx = \lim_{n \to \infty} \sum_{i=1}^n f(x_i) \Delta x
    $$
    其中 $\Delta x = \frac{b-a}{n}$，$x_i = a + i \Delta x$。

    根據微積分基本定理：
    $$
    \int_a^b f(x) \, dx = F(b) - F(a)
    $$
    其中 $F(x)$ 為 $f(x)$ 的任一原函數。

## 基本積分公式

### 常用積分公式

1. **冪函數**：$\int x^n \, dx = \frac{x^{n+1}}{n+1} + C$ ($n \neq -1$)
2. **倒數函數**：$\int \frac{1}{x} \, dx = \ln|x| + C$
3. **指數函數**：$\int e^x \, dx = e^x + C$，$\int a^x \, dx = \frac{a^x}{\ln a} + C$
4. **對數函數**：$\int \ln x \, dx = x \ln x - x + C$

### 積分技巧

#### 分部積分法

$$
\int u \, dv = uv - \int v \, du
$$

#### 換元積分法

若 $x = g(t)$，則：
$$
\int f(x) \, dx = \int f(g(t)) g^{\prime}(t) \, dt
$$

## 經濟學中的積分應用

### 消費者剩餘的計算

對於需求函數 $p = p(Q)$，在市場價格 $p^*$ 下，消費者剩餘為：

$$
CS = \int_0^{Q^{*}} p(Q) \, dQ - p^* \cdot Q^*
$$

!!! example "積分應用：消費者剩餘"
    給定線性需求函數 $p = 100 - 2Q$。在市場價格 $p^* = 60$ 時，均衡數量 $Q^* = 20$：
    $$
    \begin{aligned}
    CS &= \int_0^{20} (100 - 2Q) \, dQ - 60 \times 20\\\\
    &= \left[100Q - Q^2\right]_0^{20} - 1200 = 2000 - 400 - 1200 = 400
    \end{aligned}
    $$

### 生產者剩餘的計算

對於供給函數 $p = p(Q)$，在市場價格 $p^*$ 下，生產者剩餘為：

$$
PS = p^* \cdot Q^* - \int_0^{Q^*} p(Q) \, dQ
$$

!!! example "積分應用：生產者剩餘"
    給定線性供給函數 $p = 10 + Q$。在市場價格 $p^* = 60$ 時，均衡數量 $Q^* = 50$：
    $$
    \begin{aligned}
    PS &= 60 \times 50 - \int_0^{50} (10 + Q) \, dQ\\\\
    &= 3000 - \left[10Q + \frac{Q^2}{2}\right]_0^{50} = 3000 - (500 + 1250) = 1250
    \end{aligned}
    $$

### 現值計算中的積分

對於連續現金流 $f(t)$，在利率 $r$ 下的現值為：
$$
PV = \int_0^T f(t) e^{-rt} \, dt
$$

**例子**：永續年金現值

若每年收到固定現金流 $A$，利率為 $r$：
$$
PV = \int_0^{\infty} A e^{-rt} \, dt = A \left[-\frac{1}{r} e^{-rt}\right]_0^{\infty} = \frac{A}{r}
$$

!!! question "積分應用：現值計算"
    某商品的需求函數為 $Q^d = 50 - p^2$，供給函數為 $Q^s = 2p - 10$。

    1. 求市場均衡點 $(p^*, Q^*)$
    2. 計算消費者剩餘
    3. 計算生產者剩餘
    4. 求總社會福利 (消費者剩餘 + 生產者剩餘)